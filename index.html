<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <!-- favicon: simple SVG data URL -->
    <link rel="icon"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%2306b6d4'/%3E%3Ctext x='50' y='57' font-size='42' font-family='Arial' fill='%23042027' text-anchor='middle' font-weight='700'%3EPB%3C/text%3E%3C/svg%3E" />
    <title>Physique Blueprint</title>
    <style>
        :root {
            --bg: #0f1724;
            --card: #0b1220;
            --accent: #06b6d4;
            --muted: #94a3b8;
            --glass: rgba(255, 255, 255, 0.04);
            --maxw: 980px;
            --radius: 14px;
            font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
        }

        * {
            box-sizing: border-box
        }

        body {
            margin: 0;
            background: linear-gradient(180deg, #071024 0%, #07182b 60%);
            color: #e6eef6;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding: 28px 16px;
        }

        .wrap {
            width: 100%;
            max-width: var(--maxw);
        }

        header {
            display: flex;
            gap: 16px;
            align-items: center;
            margin-bottom: 18px
        }

        header h1 {
            font-size: 20px;
            margin: 0
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 420px;
            gap: 18px
        }

        .card {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: 0 8px 30px rgba(2, 6, 23, 0.7);
        }

        label {
            display: block;
            font-size: 13px;
            color: var(--muted);
            margin-bottom: 6px
        }

        input[type="number"],
        select {
            width: 100%;
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.04);
            background: transparent;
            color: inherit
        }

        .row {
            display: flex;
            gap: 12px
        }

        .row .col {
            flex: 1
        }

        .btn {
            background: var(--accent);
            color: #042027;
            padding: 10px 14px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-weight: 600
        }

        .muted {
            color: var(--muted);
            font-size: 13px
        }

        .result {
            margin-top: 12px;
            padding: 12px;
            background: var(--glass);
            border-radius: 10px
        }

        .result h3 {
            margin: 0 0 8px 0
        }

        .metric {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.03)
        }

        .small {
            font-size: 13px
        }

        .hint {
            font-size: 13px;
            color: var(--muted)
        }

        .visual {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: center
        }

        .avatar {
            width: 100%;
            height: 170px;
            border-radius: 10px;
            background: linear-gradient(180deg, #061223, #072033);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--muted);
            font-size: 13px
        }

        footer {
            margin-top: 12px;
            color: var(--muted);
            font-size: 13px
        }

        @media(max-width:920px) {
            .grid {
                grid-template-columns: 1fr;
            }

            .avatar {
                height: 140px
            }
        }

        .job-list {
            display: flex;
            gap: 8px;
            flex-wrap: wrap
        }

        .chip {
            padding: 6px 10px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.02);
            cursor: pointer
        }

        .chip.active {
            background: linear-gradient(90deg, var(--accent), #60a5fa);
            color: #022;
            font-weight: 700
        }

        .disclaimer {
            font-size: 12px;
            color: #c7d2fe
        }

        .split {
            display: flex;
            gap: 12px
        }

        .bignum {
            font-size: 20px;
            font-weight: 700
        }

        .section-title {
            font-size: 16px;
            font-weight: 700;
            margin-top: 10px
        }

        .list {
            margin: 6px 0 0 14px
        }

        /* layout for full report view */
        .grid.show-results {
            grid-template-columns: 1fr !important;
        }

        .grid.show-results .card:first-child {
            display: none !important;
        }

        .back-btn {
            background: transparent;
            color: var(--muted);
            border: 1px solid rgba(255, 255, 255, 0.04);
            padding: 8px 10px;
            border-radius: 8px;
            cursor: pointer
        }
    </style>
</head>

<body>
    <div class="wrap">
        <header>
            <div
                style="width:48px;height:48px;border-radius:12px;background:linear-gradient(90deg,var(--accent),#60a5fa);display:flex;align-items:center;justify-content:center;font-weight:800;color:#042027">
                PB</div>
            <div>
                <h1>Physique Blueprint</h1>
                <div class="muted">Precise maintenance, deficit and time estimates ‚Äî based on bodyfat, BMR and activity
                </div>
            </div>
        </header>

        <div class="grid">
            <div class="card" id="formCard">
                <h2 style="margin-top:0">Tell me about you</h2>
                <div style="display:grid; gap:10px">
                    <div class="row">
                        <div class="col">
                            <label>Age</label>
                            <input id="age" type="number" min="10" max="120" value="28">
                        </div>
                        <div class="col">
                            <label>Gender</label>
                            <select id="gender">
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other (use female calcs)</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col">
                            <label>Weight (kg)</label>
                            <input id="weight" type="number" min="20" step="0.1" value="73">
                        </div>
                        <div class="col">
                            <label>Height (cm)</label>
                            <input id="height" type="number" min="80" step="0.1" value="170">
                        </div>
                    </div>

                    <div>
                        <label>Current bodyfat % (optional)</label>
                        <input id="bf" type="number" min="2" max="70" step="0.1"
                            placeholder="Leave blank to auto-estimate from BMI">
                        <div class="hint">If you don't know bodyfat, we'll estimate it using BMI + age formula (approx).
                        </div>
                    </div>

                    <div>
                        <label>Desired bodyfat %</label>
                        <input id="targetBF" type="number" min="3" max="50" step="0.1" value="15">
                    </div>

                    <div>
                        <label>Your daily activity / job</label>
                        <div class="job-list" id="jobList">
                            <div class="chip" data-factor="1.2">Sedentary ‚Äî Desk / Software</div>
                            <div class="chip" data-factor="1.375">Light activity ‚Äî Standing / Home</div>
                            <div class="chip" data-factor="1.55">Moderate activity ‚Äî Active job</div>
                            <div class="chip" data-factor="1.725">Very active ‚Äî Manual work / training</div>
                            <div class="chip" data-factor="1.9">Extra active ‚Äî Heavy labour / athlete</div>
                        </div>
                        <div class="hint">Pick the one that best matches your job and daily non-exercise activity.</div>
                    </div>

                    <div class="split">
                        <div style="flex:1">
                            <label>Weekly training days</label>
                            <input id="trainDays" type="number" min="0" max="14" value="4">
                        </div>
                        <div style="width:160px">
                            <label>Target daily calorie change</label>
                            <select id="weeklyRate">
                                <option value="-250">Lose ~0.25 kg/week (‚àí250 kcal/day)</option>
                                <option value="-500">Lose ~0.45 kg/week (‚àí500 kcal/day) (‚àí500 kcal/day)</option>
                                <option value="-750">Lose ~0.7 kg/week (‚àí750 kcal/day)</option>
                                <option value="-1000">Lose ~0.9‚Äì1.0 kg/week (‚àí1000 kcal/day)</option>
                                <option value="0">Maintain</option>
                                <option value="500">Gain ~0.45 kg/week (+500 kcal/day)</option>
                            </select>
                        </div>
                    </div>

                    <div style="display:flex; gap:10px; align-items:center; margin-top:8px">
                        <button class="btn" id="calcBtn">Generate Plan</button>
                        <div class="muted">Quick, actionable numbers will appear as a full report.</div>
                    </div>

                    <div class="disclaimer">Note: This tool gives evidence-based estimates (Mifflin-St Jeor,
                        Katch-McArdle). For medical conditions or highly tailored plans consult a professional.</div>
                </div>
            </div>

            <div class="card" id="resultCard">
                <div style="display:flex; justify-content:space-between; width:100%; align-items:center">
                    <div class="visual" style="flex:1">
                        <div class="avatar" id="avatar">
                            <div style="text-align:center">
                                <div style="font-weight:700;font-size:18px" id="summaryTitle">Your plan preview</div>
                                <div class="muted small" id="summarySub">Enter your numbers and press Generate Plan
                                </div>
                            </div>
                        </div>

                        <div id="results" style="width:100%;"></div>

                        <footer>
                            <div class="muted small">Made for quick planning ‚Äî use responsible deficits (‚â§1000 kcal/day)
                                and aim for steady fat loss.</div>
                        </footer>
                    </div>
                    <div style="margin-left:12px">
                        <button class="back-btn" id="backBtn" title="Edit inputs">‚Üê Back to edit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // helper
        const $ = id => document.getElementById(id);
        const chips = document.querySelectorAll('.chip');
        let selectedFactor = 1.2;
        chips.forEach((c, i) => {
            c.addEventListener('click', () => {
                chips.forEach(x => x.classList.remove('active'));
                c.classList.add('active');
                selectedFactor = parseFloat(c.dataset.factor);
            });
            if (i === 0) c.classList.add('active');
        });

        function estimateBFfromBMI(weight, height, age, gender) {
            const bmi = weight / Math.pow(height / 100, 2);
            const sex = (gender === 'male') ? 1 : 0;
            const bf = 1.20 * bmi + 0.23 * age - 10.8 * sex - 5.4;
            return Math.max(2, Math.min(60, parseFloat(bf.toFixed(1))));
        }

        function katchMcArdleBMR(weight, bf) {
            const lean = weight * (1 - bf / 100);
            return 370 + 21.6 * lean;
        }

        function format(n) { return Number.isFinite(n) ? Math.round(n) : '-'; }

        function macroTargets(weight, bf, goal, gender, trainDays) {
            // Training-based protein targets (Option A - Physique Blueprint)
            // gender: 'male'|'female'|'other' (treat other as female)
            const days = Number(trainDays) || 0;
            const g = (gender === 'male') ? 'male' : 'female';
            let proteinPerKg;
            if (g === 'male') {
                if (days <= 1) proteinPerKg = 1.2;
                else if (days <= 3) proteinPerKg = 1.4;
                else if (days <= 5) proteinPerKg = 1.6;
                else proteinPerKg = 1.9; // between 1.8-2.0
            } else {
                if (days <= 1) proteinPerKg = 1.0;
                else if (days <= 3) proteinPerKg = 1.2;
                else if (days <= 5) proteinPerKg = 1.4;
                else proteinPerKg = 1.7; // between 1.6-1.8
            }
            const proteinG = Math.round(proteinPerKg * weight);
            return { proteinG, proteinPerKg };
        }

        function trainingAdvice(bf) {
            if (bf >= 30) {
                return {
                    heading: 'High bodyfat (‚â•30%)',
                    points: [
                        'Prioritise low-impact cardio (brisk walking, incline treadmill) 5‚Äì7 times/week, 30‚Äì45 min sessions.',
                        'Begin resistance training 2‚Äì3x/week focusing on compound lifts‚Äîpreserve and build lean mass.',
                        'Start with moderate calorie deficit (~‚àí500 kcal/day). Avoid aggressive deficits immediately.'
                    ]
                };
            } else if (bf >= 20) {
                return {
                    heading: 'Moderate bodyfat (20‚Äì29%)',
                    points: [
                        'Combine resistance training 3‚Äì5x/week with cardio 3x/week (incline walking, intervals).',
                        'Focus on progressive overload and higher protein (‚âà2.0 g/kg if losing).',
                        'Steady deficit ‚àí500 to ‚àí750 kcal/day works well.'
                    ]
                };
            } else if (bf >= 10) {
                return {
                    heading: 'Lower bodyfat (10‚Äì19%)',
                    points: [
                        'If the goal is lean gain: focus on strength training 4‚Äì6x/week with small surplus (+250‚Äì500 kcal/day).',
                        'If cutting to single digits: keep high protein and preserve strength; do minimal steady cardio.'
                    ]
                };
            } else {
                return {
                    heading: 'Athletic / very low bodyfat (<10%)',
                    points: [
                        'These clients need careful monitoring; small surpluses for muscle gain, avoid long deficits.',
                        'Work with a coach for contest prep or extreme changes.'
                    ]
                };
            }
        }

        function renderReport(params) {
            const { age, gender, weight, height, bf, targetBF, trainDays, dailyChange, usedEstimated, bmr, maintenance, adjustedMaintenance, leanMass, fatMass, targetWeight, weightChange, totalKcalChange, timeDays, safe, macros, fatG, fatPercent, carbsG, fiberG, advice } = params;

            const results = $('results');
            const title = $('summaryTitle');
            const sub = $('summarySub');
            title.innerText = 'Full plan ‚Äî detailed report';
            sub.innerText = usedEstimated ? `BF estimated: ${bf}% ‚Äî adjust if you know it.` : `BF: ${bf}% (provided)`;

            results.innerHTML = `
        <div class="result">
          <h3>Calories & body metrics</h3>
          <div class="metric"><div class="small">BMR (Katch-McArdle)</div><div class="bignum">${format(bmr)} kcal/day</div></div>
          <div class="metric"><div class="small">Activity factor</div><div class="bignum">${selectedFactor} ‚Üí Maintenance ${format(Math.round(maintenance))} kcal/day</div></div>
          <div class="metric"><div class="small">Adjusted maintenance (training boost)</div><div class="bignum">${format(Math.round(adjustedMaintenance))} kcal/day</div></div>
          <div class="metric"><div class="small">Current lean mass</div><div class="bignum">${leanMass.toFixed(2)} kg</div></div>
          <div class="metric"><div class="small">Current fat mass</div><div class="bignum">${fatMass.toFixed(2)} kg</div></div>
          <div class="metric"><div class="small">Target weight at ${targetBF}% BF</div><div class="bignum">${targetWeight.toFixed(2)} kg</div></div>
          <div class="metric"><div class="small">Total weight change</div><div class="bignum">${weightChange.toFixed(2)} kg</div></div>
          <div class="metric"><div class="small">Calories to ${weightChange < 0 ? 'lose' : 'gain'}</div><div class="bignum">${Math.round(totalKcalChange)} kcal</div></div>
          <div class="metric"><div class="small">Daily deficit/surplus chosen</div><div class="bignum">${dailyChange > 0 ? '+' + dailyChange : dailyChange} kcal/day</div></div>
          <div class="metric"><div class="small">Estimated days (using chosen daily change)</div><div class="bignum">${timeDays ? timeDays + ' days (' + Math.ceil(timeDays / 7) + ' weeks)' : '‚Äî'}</div></div>
          <div class="metric"><div class="small">Safety check</div><div class="bignum">${safe ? 'Within common safe limits' : 'Caution ‚Äî exceeds 1000 kcal/day'}</div></div>
        </div>

        <div class="result">
          <h3>Detailed guidance & how to use this report</h3>
          <div class="section-title">What these numbers mean</div>
          <div class="small list">‚Ä¢ <strong>BMR</strong>: your Basal Metabolic Rate ‚Äî calories to fuel basic body functions at rest. We used Katch‚ÄìMcArdle (lean mass) for better precision if bodyfat is known.</div>
          <div class="small list">‚Ä¢ <strong>Maintenance</strong>: BMR √ó activity factor (your job + non-exercise activity). This is approximately how many calories you need to eat each day to keep your current weight.</div>
          <div class="small list">‚Ä¢ <strong>Lean mass</strong>: the weight of your muscles, bones and organs ‚Äî important to preserve while losing fat.</div>
          <div class="small list">‚Ä¢ <strong>Fat mass</strong>: total kilograms of stored fat. Target changes are computed assuming fat loss/gain with preserved lean mass.</div>

          <div class="section-title">Practical nutrition targets</div>
          <div class="small list">‚Ä¢ <strong>Protein:</strong> ${macros.proteinG} g/day (~${macros.proteinPerKg} g/kg). Higher protein preserves muscle during deficits and helps recovery.</div>
          <div class="small list">‚Ä¢ <strong>Fat:</strong> ~${fatG} g/day (~${fatPercent}% of calories). Essential for hormones and satiety.</div>
          <div class="small list">‚Ä¢ <strong>Carbs:</strong> ~${carbsG} g/day (remaining calories). Carbs fuel training and recovery.</div>
          <div class="small list">‚Ä¢ <strong>Fiber:</strong> aim for ‚âà${fiberG} g/day. Supports digestion and satiety.</div>

          <div class="section-title">Training recommendations (based on bodyfat)</div>
          <div class="small list"><strong>${advice.heading}</strong></div>
          ${advice.points.map(p => `<div class="small list">‚Ä¢ ${p}</div>`).join('')}

          <div class="section-title">Practical example</div>
          <div class="small list">If someone has ${bf}% bodyfat and wants to reach ${targetBF}%: start with a sensible deficit (e.g. ‚àí500 kcal/day), resistance train 3‚Äì5x/week, include 20‚Äì40 min incline walking on off-days. Reassess after 4 weeks and adjust calories based on weight changes.</div>

          <div class="section-title">Meal timing & composition</div>
          <div class="small list">‚Ä¢ Spread protein across meals (e.g. 4 meals with ~${Math.round(macros.proteinG / 4)} g each).</div>
          <div class="small list">‚Ä¢ Pre- and post-workout: include carbs + protein to support performance and recovery.</div>

          <div class="section-title">Safety & notes</div>
          <div class="small list">‚Ä¢ All calculations are estimations based on standard formulas (Katch‚ÄìMcArdle, Mifflin‚ÄìSt Jeor, activity multipliers). Individual responses vary due to genetics, medical conditions, medications, and lifestyle.</div>
          <div class="small list">‚Ä¢ This tool does NOT replace personalised advice from a registered dietitian, physician or certified coach.</div>
          <div class="small list">‚Ä¢ If you want a full diet plan generated, DM me on <a href="https://www.instagram.com/_prathamesh_12_10/" target="_blank" rel="noopener noreferrer" style="color:#ffffff; font-weight:700; text-decoration:underline;">üì∏ Instagram</a>  and follow for updates.</div>
        </div>
      `;
        }

        // Main calculate handler
        document.getElementById('calcBtn').addEventListener('click', () => {
            const age = parseFloat($('age').value) || 0;
            const gender = $('gender').value;
            const weight = parseFloat($('weight').value) || 0;
            const height = parseFloat($('height').value) || 0;
            let bf = parseFloat($('bf').value);
            const targetBF = parseFloat($('targetBF').value) || 15;
            const trainDays = parseInt($('trainDays').value) || 0;
            const dailyChange = parseInt($('weeklyRate').value) || -500;

            if (!age || !weight || !height) { alert('Please fill age, weight and height'); return; }

            let usedEstimated = false;
            if (!isFinite(bf) || bf <= 0) { bf = estimateBFfromBMI(weight, height, age, gender); usedEstimated = true; }

            const leanMass = weight * (1 - bf / 100);
            const fatMass = weight - leanMass;

            const bmr = katchMcArdleBMR(weight, bf);
            const activityFactor = selectedFactor;
            const maintenance = bmr * activityFactor;
            const trainingBoost = Math.min(0.12, 0.02 * trainDays);
            const adjustedMaintenance = maintenance * (1 + trainingBoost);

            const targetWeight = leanMass / (1 - targetBF / 100);
            const weightChange = targetWeight - weight; // negative if losing
            const absKg = Math.abs(weightChange);
            const kcalPerKg = 7700;
            const totalKcalChange = absKg * kcalPerKg;
            let timeDays = null;
            if (dailyChange !== 0) timeDays = Math.ceil(totalKcalChange / Math.abs(dailyChange));
            const safe = Math.abs(dailyChange) <= 1000;

            // Macro guidance
            const goalType = dailyChange < 0 ? 'lose' : (dailyChange > 0 ? 'gain' : 'maintain');
            const macros = macroTargets(weight, bf, goalType, gender, trainDays);
            // calories from protein
            const proteinCals = macros.proteinG * 4;

            // suggest fat grams as percentage of total calories
            const fatPercent = (goalType === 'lose') ? 25 : (goalType === 'gain' ? 30 : 28); // percent of cals
            const fatCals = Math.round((adjustedMaintenance + dailyChange) * (fatPercent / 100));
            const fatG = Math.round(fatCals / 9);

            const remainingCals = Math.round((adjustedMaintenance + dailyChange) - proteinCals - fatCals);
            const carbsG = Math.round(remainingCals / 4);

            // fiber guidance
            const fiberG = Math.round(Math.max(14, weight * 0.3)); // rough: 14g per 1000 kcal, or weight based small heuristic

            const advice = trainingAdvice(bf);

            // show report and hide form
            document.querySelector('.grid').classList.add('show-results');

            renderReport({ age, gender, weight, height, bf, targetBF, trainDays, dailyChange, usedEstimated, bmr, maintenance, adjustedMaintenance, leanMass, fatMass, targetWeight, weightChange, totalKcalChange, timeDays, safe, macros, fatG, fatPercent, carbsG, fiberG, advice });
        });

        // Back button to return to edit mode
        document.getElementById('backBtn').addEventListener('click', () => {
            document.querySelector('.grid').classList.remove('show-results');
            // reset summary title/sub
            $('summaryTitle').innerText = 'Your plan preview';
            $('summarySub').innerText = 'Enter your numbers and press Generate Plan';
            $('results').innerHTML = '';
        });
    </script>
</body>

</html>
